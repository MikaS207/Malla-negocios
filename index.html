<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Curricular Interactiva</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f5f5f5;
      margin: 20px;
    }

    h1, h2 {
      color: #2c3e50;
    }

    .leyenda {
      background: #ecf0f1;
      padding: 10px;
      margin-bottom: 20px;
      border-left: 5px solid #3498db;
    }

    .ciclo {
      margin-bottom: 30px;
    }

    .curso {
      padding: 8px;
      margin: 5px;
      border-radius: 5px;
      cursor: pointer;
      border: 1px solid #ccc;
      transition: background-color 0.3s;
    }

    .bloqueado {
      background-color: #ccc;
      color: #fff;
      cursor: not-allowed;
    }

    .disponible {
      background-color: #ecf0f1;
    }

    .completado {
      background-color: #2ecc71;
      color: white;
      text-decoration: line-through;
    }

    .area-Finanzas {
      border-left: 5px solid #f39c12;
    }

    .area-Marketing {
      border-left: 5px solid #e74c3c;
    }

    .area-Contabilidad {
      border-left: 5px solid #8e44ad;
    }

    .area-Investigacion {
      border-left: 5px solid #16a085;
    }

    .area-Internacional {
      border-left: 5px solid #2980b9;
    }

    .area-General {
      border-left: 5px solid #7f8c8d;
    }

    .reiniciar {
      margin: 10px 0;
      padding: 10px 15px;
      background-color: #e74c3c;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <h1>Malla Curricular Interactiva</h1>
  <div class="leyenda">
    <strong>Leyenda:</strong> <br>
    ðŸ”“ <span class="disponible">Disponible</span> | â›” <span class="bloqueado">Bloqueado</span> | âœ… <span class="completado">Completado</span>
  </div>
  <button class="reiniciar" onclick="reiniciarProgreso()">ðŸ”„ Reiniciar avance</button>
  <div id="malla"></div>
  <script>
    const cursos = [
      // Ciclo 0
      { nombre: "NivelaciÃ³n de Lenguaje", ciclo: 0, requisitos: [], area: "General" },
      { nombre: "NivelaciÃ³n de MatemÃ¡tica", ciclo: 0, requisitos: [], area: "General" },
      
      // Ciclo 1
      { nombre: "ComprensiÃ³n y ProducciÃ³n de Lenguaje I", ciclo: 1, requisitos: ["NivelaciÃ³n de Lenguaje"], area: "General" },
      { nombre: "Fundamentos para el CÃ¡lculo", ciclo: 1, requisitos: ["NivelaciÃ³n de MatemÃ¡tica"], area: "General" },
      { nombre: "Fundamentos de la InvestigaciÃ³n", ciclo: 1, requisitos: [], area: "Investigacion" },
      { nombre: "Historia de la GlobalizaciÃ³n", ciclo: 1, requisitos: [], area: "Internacional" },

      // Ciclo 2
      { nombre: "CÃ¡lculo", ciclo: 2, requisitos: ["Fundamentos para el CÃ¡lculo"], area: "General" },
      { nombre: "TeorÃ­a MicroeconÃ³mica", ciclo: 2, requisitos: [], area: "Finanzas" },
      { nombre: "EstadÃ­stica Descriptiva", ciclo: 2, requisitos: ["CÃ¡lculo"], area: "General" },
      { nombre: "Contabilidad Financiera", ciclo: 2, requisitos: [], area: "Contabilidad" },
      { nombre: "INTERNATIONAL BUSINESS", ciclo: 2, requisitos: [], area: "Internacional" },

      // Ciclo 3
      { nombre: "MatemÃ¡tica Financiera", ciclo: 3, requisitos: ["CÃ¡lculo"], area: "Finanzas" },
      { nombre: "COMPORTAMIENTO DEL CONSUMIDOR", ciclo: 3, requisitos: [], area: "Marketing" },
      { nombre: "Contabilidad de Costos", ciclo: 3, requisitos: ["Contabilidad Financiera"], area: "Contabilidad" },
      { nombre: "InvestigaciÃ³n de Mercados", ciclo: 3, requisitos: ["Fundamentos de la InvestigaciÃ³n"], area: "Investigacion" },

      // Ciclo 4
      { nombre: "MacroeconomÃ­a", ciclo: 4, requisitos: ["TeorÃ­a MicroeconÃ³mica"], area: "Finanzas" },
      { nombre: "Marketing", ciclo: 4, requisitos: [], area: "Marketing" },
      { nombre: "EstadÃ­stica Inferencial", ciclo: 4, requisitos: ["EstadÃ­stica Descriptiva"], area: "General" },
      { nombre: "GestiÃ³n Financiera", ciclo: 4, requisitos: ["MatemÃ¡tica Financiera"], area: "Finanzas" },

      // Ciclo 5
      { nombre: "DirecciÃ³n de Ventas", ciclo: 5, requisitos: ["Marketing"], area: "Marketing" },
      { nombre: "GestiÃ³n del Talento Humano", ciclo: 5, requisitos: [], area: "General" },
      { nombre: "Comercio Internacional", ciclo: 5, requisitos: ["INTERNATIONAL BUSINESS"], area: "Internacional" },
      { nombre: "Costos para la Toma de Decisiones", ciclo: 5, requisitos: ["Contabilidad de Costos"], area: "Contabilidad" },

      // Ciclo 6
      { nombre: "GestiÃ³n de la Cadena de Suministro", ciclo: 6, requisitos: [], area: "General" },
      { nombre: "Finanzas Internacionales", ciclo: 6, requisitos: ["GestiÃ³n Financiera"], area: "Finanzas" },
      { nombre: "NegociaciÃ³n Internacional", ciclo: 6, requisitos: ["Comercio Internacional"], area: "Internacional" },
      { nombre: "DirecciÃ³n Comercial", ciclo: 6, requisitos: ["DirecciÃ³n de Ventas"], area: "Marketing" },

      // Ciclo 7
      { nombre: "Inteligencia Comercial", ciclo: 7, requisitos: ["InvestigaciÃ³n de Mercados"], area: "Investigacion" },
      { nombre: "LogÃ­stica Internacional", ciclo: 7, requisitos: ["GestiÃ³n de la Cadena de Suministro"], area: "Internacional" },
      { nombre: "GestiÃ³n de Marca", ciclo: 7, requisitos: ["Marketing"], area: "Marketing" },
      { nombre: "EvaluaciÃ³n de Proyectos", ciclo: 7, requisitos: ["GestiÃ³n Financiera"], area: "Finanzas" },

      // Ciclo 8
      { nombre: "GestiÃ³n de la InnovaciÃ³n", ciclo: 8, requisitos: [], area: "General" },
      { nombre: "Desarrollo de Nuevos Productos", ciclo: 8, requisitos: ["GestiÃ³n de Marca"], area: "Marketing" },
      { nombre: "ConsultorÃ­a Empresarial", ciclo: 8, requisitos: [], area: "General" },
      { nombre: "GestiÃ³n EstratÃ©gica", ciclo: 8, requisitos: [], area: "General" },

      // Ciclo 9
      { nombre: "Ã‰tica Profesional", ciclo: 9, requisitos: [], area: "General" },
      { nombre: "FormulaciÃ³n y EvaluaciÃ³n de Proyectos", ciclo: 9, requisitos: ["EvaluaciÃ³n de Proyectos"], area: "Finanzas" },
      { nombre: "Seminario de InvestigaciÃ³n Aplicada I", ciclo: 9, requisitos: ["Fundamentos de la InvestigaciÃ³n"], area: "Investigacion" },

      // Ciclo 10
      { nombre: "PrÃ¡cticas Pre Profesionales", ciclo: 10, requisitos: ["Seminario de InvestigaciÃ³n Aplicada I"], area: "General" },
      { nombre: "Seminario de InvestigaciÃ³n Aplicada II", ciclo: 10, requisitos: ["Seminario de InvestigaciÃ³n Aplicada I"], area: "Investigacion" },
    ];

    const mallaDiv = document.getElementById("malla");

    function guardarEstado(nombre, estado) {
      localStorage.setItem("curso_" + nombre, estado);
    }

    function cargarEstado(nombre) {
      return localStorage.getItem("curso_" + nombre) || "bloqueado";
    }

    function estaDisponible(curso) {
      return curso.requisitos.every(r => cargarEstado(r) === "completado");
    }

    function renderMalla() {
      mallaDiv.innerHTML = "";
      const ciclos = [...new Set(cursos.map(c => c.ciclo))].sort((a, b) => a - b);
      ciclos.forEach(ciclo => {
        const cicloDiv = document.createElement("div");
        cicloDiv.className = "ciclo";
        cicloDiv.innerHTML = `<h2>Ciclo ${ciclo}</h2>`;

        cursos.filter(c => c.ciclo === ciclo).forEach(curso => {
          const estado = cargarEstado(curso.nombre);
          const desbloqueado = estaDisponible(curso);
          const cursoDiv = document.createElement("div");
          cursoDiv.className = `curso area-${curso.area} ${estado}`;
          cursoDiv.textContent = curso.nombre;

          if (!desbloqueado && estado !== "completado") {
            cursoDiv.classList.add("bloqueado");
          } else if (estado !== "completado") {
            cursoDiv.classList.add("disponible");
          }

          cursoDiv.onclick = () => {
            if (!cursoDiv.classList.contains("bloqueado")) {
              const nuevoEstado = estado === "completado" ? "disponible" : "completado";
              guardarEstado(curso.nombre, nuevoEstado);
              renderMalla();
            }
          };
          cicloDiv.appendChild(cursoDiv);
        });

        mallaDiv.appendChild(cicloDiv);
      });
    }

    function reiniciarProgreso() {
      cursos.forEach(curso => localStorage.removeItem("curso_" + curso.nombre));
      renderMalla();
    }

    renderMalla();
  </script>
</body>

</html>
